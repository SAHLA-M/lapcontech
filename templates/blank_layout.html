{% load static %}
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>lapcon-your laptops</title>
        <!-- Favicon-->
        <link rel="icon" type="image/x-icon" href="{% static 'images/logolapcon.png' %}" />
        <!-- Bootstrap icons-->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css " rel="stylesheet" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="{% static 'css/style.css' %}" rel="stylesheet" />
        <link href="{% static 'css/styles.css' %}" rel="stylesheet" />
        <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
         <!-- fontawsom icons-->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-papD8p13YdNq+gTWybv+zOSk+Nv9AbpjrJ2cNoqaqLKm3+5g7ZT+nl6Tqz6Z+YqzYkU49fH/qRgnnObHZ/0bDQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    </head>
    <body>
        <!-- Navigation-->
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <div class="container px-4 px-lg-2">
               <img class='me-5' src="{% static 'images\logolapcon.png' %}" alt="" style="width: 123px;height: 53px;">
              

                <form method="GET" class="me-3 w-50  d-flex align-items-center gap-2">
                    <input type="text" name="search" class="form-control shadow-sm me-3" placeholder="Search products..." value="{{ search_query }}">
                    <button type="submit" class="btn btn-primary shadow-sm">Search</button>
                    <a href="" class="btn btn-outline-secondary shadow-sm">Clear</a>
                </form>
                

                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav me-auto mb-2 mb-lg-0 ms-lg-4">
                        <li class="nav-item"><a class="nav-link active" aria-current="page" href="#!">About Us</a></li>
                        <li class="nav-item"><a class="nav-link" href="#!">Support</a></li>
                        <li class="nav-item"><a class="nav-link" href="#!">FAQs</a></li>
                       
                    </ul>
                    <form class="d-flex">
                        <a href="{% url 'view_cart' %}" class="btn btn-outline-dark" type="submit">
                            <i class="bi-cart-fill me-1"></i>
                            Cart
                            <span class="badge bg-dark text-white ms-1 rounded-pill cart-items-count">{{ request.session.cart_data_obj|length}}</span>
                        </a>
                    </form>
                </div>
                
            </div>
            
        </nav>
        {% if messages %}
                    {% for message in messages  %}
                        <div class="alert alert-{{ message.tags }}">
                           <strong> {{ message }}</strong>
                        </div>
                    {% endfor %}
                {% endif %}
                <script>
                    setTimeout(() => {
                        $('.alert').alert('close');
                    }, 3000);
                         
                </script>
        {% block contant%}
        
        {% endblock contant%}
        <!-- Footer-->
         <hr>
        <footer class="py-5 ">
            <div class="container-fluid p-0 border-top bg-white">
                <div class="container pt-5">
                    <div class="pb-5 border-bottom">
                        <ul class="nav justify-content-between">
                                                    <li class="nav-item d-flex ">
                                    <div class="pe-2">
                                        <svg class="svg-inline--fa fa-location-dot fa-2x" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="location-dot" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512" data-fa-i2svg=""><path fill="currentColor" d="M215.7 499.2C267 435 384 279.4 384 192C384 86 298 0 192 0S0 86 0 192c0 87.4 117 243 168.3 307.2c12.3 15.3 35.1 15.3 47.4 0zM192 128a64 64 0 1 1 0 128 64 64 0 1 1 0-128z"></path></svg><!-- <i class="fa fa-2x fa-location-dot" aria-hidden="true"></i> Font Awesome fontawesome.com -->
                                    </div>
                                    <div class="default-cursor">
                                        <h5 class="fw-bold">Find Us</h5>
                                        <p class="text-capitalize">FALCON TOWER <br>VALANCHERY ROAD<br>PANG CHENDI, MALAPPURAM (DT)<br>KERALA-679338</p>
                                    </div>
                                </li>
                                                                        <a href="tel:+918129526633" class="text-reset text-decoration-none">
                                    <li class="nav-item d-flex ">
                                        <div class="pe-2">
                                            <svg class="svg-inline--fa fa-phone-volume fa-2x" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="phone-volume" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg=""><path fill="currentColor" d="M280 0C408.1 0 512 103.9 512 232c0 13.3-10.7 24-24 24s-24-10.7-24-24c0-101.6-82.4-184-184-184c-13.3 0-24-10.7-24-24s10.7-24 24-24zm8 192a32 32 0 1 1 0 64 32 32 0 1 1 0-64zm-32-72c0-13.3 10.7-24 24-24c75.1 0 136 60.9 136 136c0 13.3-10.7 24-24 24s-24-10.7-24-24c0-48.6-39.4-88-88-88c-13.3 0-24-10.7-24-24zM117.5 1.4c19.4-5.3 39.7 4.6 47.4 23.2l40 96c6.8 16.3 2.1 35.2-11.6 46.3L144 207.3c33.3 70.4 90.3 127.4 160.7 160.7L345 318.7c11.2-13.7 30-18.4 46.3-11.6l96 40c18.6 7.7 28.5 28 23.2 47.4l-24 88C481.8 499.9 466 512 448 512C200.6 512 0 311.4 0 64C0 46 12.1 30.2 29.5 25.4l88-24z"></path></svg><!-- <i class="fa-solid fa-phone-volume fa-2x"></i> Font Awesome fontawesome.com -->
                                        </div>
                                        <div class="default-cursor">
                                            <h5 class="fw-bold">Call Us</h5>
                                            <p class="text-capitalize">+918129526633</p>
                                        </div>
                                    </li>
                                </a>
                                                                        <a href="mailto:lapcontechnologys@gmail.com" class="text-reset text-decoration-none">
                                    <li class="nav-item d-flex ">
                                        <div class="pe-2">
                                            <svg class="svg-inline--fa fa-envelope-open fa-2x" aria-hidden="true" focusable="false" data-prefix="far" data-icon="envelope-open" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg=""><path fill="currentColor" d="M255.4 48.2c.2-.1 .4-.2 .6-.2s.4 .1 .6 .2L460.6 194c2.1 1.5 3.4 3.9 3.4 6.5v13.6L291.5 355.7c-20.7 17-50.4 17-71.1 0L48 214.1V200.5c0-2.6 1.2-5 3.4-6.5L255.4 48.2zM48 276.2L190 392.8c38.4 31.5 93.7 31.5 132 0L464 276.2V456c0 4.4-3.6 8-8 8H56c-4.4 0-8-3.6-8-8V276.2zM256 0c-10.2 0-20.2 3.2-28.5 9.1L23.5 154.9C8.7 165.4 0 182.4 0 200.5V456c0 30.9 25.1 56 56 56H456c30.9 0 56-25.1 56-56V200.5c0-18.1-8.7-35.1-23.4-45.6L284.5 9.1C276.2 3.2 266.2 0 256 0z"></path></svg><!-- <i class="fa-regular fa-envelope-open fa-2x"></i> Font Awesome fontawesome.com -->
                                        </div>
                                        <div class="default-cursor">
                                            <h5 class="fw-bold">Mail Us</h5>
                                            <p>lapcontechnologys@gmail.com</p>
                                        </div>
                                    </li>
                                </a>
                                            </ul>
                    </div>
                    <div class="row overflow-hidden pt-5">
                        <div class="col-lg-5 col-md-12 footer-icons-section">
                                                <a class="footer-logo pointer" href="">
                                                        <img src="{% static 'images/logolapcon.png' %}" width="248px" height="85px" >
                            </a>
                            <h5 class="fw-bold mx-2 my-3">Subscribe</h5>
                            <a href="" class="style-none" target="_blank">
                                <ion-icon name="logo-instagram" class="social-media-icon pointer md hydrated" role="img"></ion-icon>
                            </a>
                            <a href="" class="style-none" target="_blank">
                                <ion-icon name="logo-facebook" class="social-media-icon pointer md hydrated" role="img"></ion-icon>
                            </a>
                            <a href="" class="style-none" target="_blank">
                                <ion-icon name="logo-twitter" class="social-media-icon pointer md hydrated" role="img"></ion-icon>
                            </a>
                            <a href="" class="style-none" target="_blank">
                                <ion-icon name="logo-whatsapp" class="social-media-icon pointer md hydrated" role="img"></ion-icon>
                            </a>
                        </div>
                        <div class="col-lg-7 col-md-12 footer-text-section">
                            <div class="row justify-content-around ps-md-4">
                                <div class="col-4 pe-1 default-cursor">
                                    <h5>Company</h5>
                                    <a href="" class="text-reset text-decoration-none">
                                        <p class="m-0">About Us</p>
                                    </a>
                                    <a href="" class="text-reset text-decoration-none">
                                        <p class="m-0">Contact Us</p>
                                    </a>
                                    <a href="" class="text-reset text-decoration-none">
                                        <p class="m-0">Products</p>
                                    </a>
                                    <a href="" class="text-reset text-decoration-none">
                                        <p class="m-0">Category</p>
                                    </a>
                                </div>
                                <div class="col-4 pe-1 default-cursor">
                                    <h5>Legal</h5>
                                    <a href="" class="text-reset text-decoration-none">
                                        <p class="m-0">Privacy Policy</p>
                                    </a>
                                    <a href="" class="text-reset text-decoration-none">
                                        <p class="m-0">Terms &amp; Condition</p>
                                    </a>
                                    <a href="" class="text-reset text-decoration-none">
                                        <p class="m-0">Return Policy</p>
                                    </a>
                                    <a href=" class="text-reset text-decoration-none">
                                        <p class="m-0">Shipping Policy</p>
                                    </a>
                                </div>
                                <div class="col-4 default-cursor">
                                    <h5>Resources</h5>
                                    <a href="">
                                        <p class="m-0">Support</p>
                                    </a>
                                    <a href="" target="_blank">
                                        <p class="m-0">Android App</p>
                                    </a>
                                    <a href="" target="_blank">
                                        <p class="m-0">Ios App</p>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <hr>
                <div class=" container  ">
                    <div class="row text-center">
                                    <span>Copyright © 2023-24, All Right Reserved Lapcon| Developed by Sahla m</span>
                            </div>
            </div>
            
        </footer>
        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        

            <script>
        document.getElementById('logout').addEventListener('click', function (e) {
            e.preventDefault();  // Prevent the default anchor behavior
    
            Swal.fire({
                title: 'Are you sure?',
                text: "Do you really want to log out?",
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#d33',
                cancelButtonColor: '#124e66',
                confirmButtonText: 'Yes, log out!',
                cancelButtonText: 'Cancel'
            }).then((result) => {
                if (result.isConfirmed) {
                    // Redirect to the logout URL
                    window.location.href = "{% url 'signout' %}";
                } else {
                    Toastify({
                        text: "Logout canceled.",
                        duration: 3000,
                        close: true,
                        gravity: "top",
                        position: "right",
                        backgroundColor: "green",
                        stopOnFocus: true,
                    }).showToast();
                }
            });
        });
    
        function toggleDropdown() {
            var dropdown = document.getElementById("dropdown");
            dropdown.style.display = dropdown.style.display === "block" ? "none" : "block";
        }
    
        // Close dropdown when clicking outside
        window.onclick = function(event) {
            if (!event.target.matches('.avatar')) {
                var dropdown = document.getElementById("dropdown");
                if (dropdown.style.display === "block") {
                    dropdown.style.display = "none";
                }
            }
        }
    </script>


    <script>
        var MenuItems = document.getElementById("MenuItems");
        MenuItems.style.maxHeight = "0px";
        function menutoggle() {
            if (MenuItems.style.maxHeight == "0px") {
                MenuItems.style.maxHeight = "200px"
            }
            else {
                MenuItems.style.maxHeight = "0px"
            }
        }
    </script>

    
    <script>
    $(document).ready(function() {
        $('.add-to-cart-btn').click(function(e) {
            e.preventDefault();
            var variantId = $(this).data('variant-id');
            
            $.ajax({
                url: "{% url 'add_to_cart' 0 %}".replace('0', variantId),
                type: 'GET',
                success: function(response) {
                    if (response.status === 'added' || response.status === 'quantity_updated') {
                        Toastify({
                            text: "Item added to cart!",
                            duration: 3000,
                            close: true,
                            gravity: "top",
                            position: "right",
                            backgroundColor: "#4CAF50",
                            stopOnFocus: true,
                        }).showToast();
                    } else if (response.status === 'unauthenticated') {
                        Toastify({
                            text: "Please sign in to add items to your cart.!",
                            duration: 3000,
                            close: true,
                            gravity: "top",
                            position: "right",
                            backgroundColor: "red",
                            stopOnFocus: true,
                        }).showToast();
                    } else if (response.status === 'max') {
                        Toastify({
                            text: "The item rached max limit on your cart.",
                            duration: 3000,
                            close: true,
                            gravity: "top",
                            position: "right",
                            backgroundColor: "yellow",
                            stopOnFocus: true,
                        }).showToast();
                    }
                }
            });
        });
        
        $('.add-to-wishlist-btn').click(function(e) {
            e.preventDefault();
            var variantId = $(this).data('variant-id');
            
            $.ajax({
                url: "{% url 'add_to_wishlist' 0 %}".replace('0', variantId),
                type: 'GET',
                success: function(response) {
                    if (response.status === 'added') {
                        Toastify({
                            text: "Item added to wishlist!",
                            duration: 3000,
                            close: true,
                            gravity: "top",
                            position: "right",
                            backgroundColor: "#4CAF50",
                            stopOnFocus: true,
                        }).showToast();
                    } else if (response.status === 'exists') {
                        Toastify({
                            text: "Item already in wishlist!",
                            duration: 3000,
                            close: true,
                            gravity: "top",
                            position: "right",
                            backgroundColor: "yellow",
                            stopOnFocus: true,
                        }).showToast();
                    } else if (response.status === 'unauthenticated') {
                        Toastify({
                            text: "Please sign in to add items to your wishlist.!",
                            duration: 3000,
                            close: true,
                            gravity: "top",
                            position: "right",
                            backgroundColor: "red",
                            stopOnFocus: true,
                        }).showToast();
                    }
                }
            });
        });
    });
    </script>
   <script>
    document.addEventListener("DOMContentLoaded", function () {
        const offeredPrice = document.querySelectorAll('.offered-price')
        const offer = document.querySelectorAll('.offer')
        const vPrice = document.querySelectorAll('.variant-price')
        for (let i = 0; i < offeredPrice.length; i++) {
            offeredP = vPrice[i].textContent - (vPrice[i].textContent*offer[i].textContent/100)
            offeredPrice[i].textContent = '₹' + offeredP
          }

        const ofer_percent = offer.textContent;
        const variantPrice = vPrice.textContent;
        console.log(variantPrice,offeredPrice)
        let price = variantPrice - (variantPrice*ofer_percent/100)
        offeredPrice.textContent = price
    });
   </script>

    </body>
</html>





